Description
 
We have developed a php AJAX property search function that is simple to add to your client's website. This has been optimised for google and other search engines. This should help to increase search rankings.
The properties will be listed by search engines without the need for a database. No need for updates, no need to worry about databases getting out of sync. Your client's website will always contain the latest data.
We have provided a range of functionality that your client can choose to include or limit, making it completely customisable for their needs.
See ( What can be Customised on my Webkit? )
 
Requirements
This webkit has been built with PHP and JQuery. Currently the only versions of PHP supported are Ver. 5.4 and above.
It is required to install the Webkit in the top level directory of the website or at most 1 level down.
The "default document list" in your web site configuration must include an entry for "index.php".
Certain functionality requires additional API’s you can modify this to suit your needs.  Please see below a list of functions that require additional libraries:
MultiSelect Fields on Search page
Chosen.jquery.js
Chosen.css
Datepicker/Booking Calendar
JQueryUI.js
JQueryUI.css
Icons
Font-Awesome.css
Samples (The sample website uses Bootstrap to standardise layout)
Bootstrap.js
Bootstrap.css
 
Getting Started
 
Create then Download the Webkit
See the following article: Getting Started - How to Create a Webkit
 
Activate the Webkit.
Once you have downloaded the webkit from the location included in the email. You will need to setup webkitConfig.php for the webkit to work.
webkitConfig.php is the configuration file and the webkit will not work until you have defined the following constants ‘$contactId’ and ‘$hashKey’.  You will find these details in the ‘Webkit Created’ email. Please update the constants to the values that you have been sent.
Please note if you are trying to run the webkit on an IP address that is different to the one used when creating it, it will not work.
 
Setting Up
As you can see in the sample modules, to add the functionality to your website simply include one file (webkitConfig.php) and call a single function to display any of the options.
Listed below are the basic search functions that can be called:
displaySearchForm()
displaySearchResults()
displayMetaTags()
Below is a list of additional functionality that you can take advantage of:
autoSearchLink()
This takes a range of parameters to define your own search lists, the minimum amount of parameters accepted are 3 (title, location, type). Below is the full list of parameters accepted by this function.
mixed autoSearchLink ( string $linkText , string $location , string $type  [, string $searchType = ‘/ForSale/’ , string $area = $defaultArea  , string $subType = ‘’ , string $priceMin = ‘’ , string $priceMax  = ‘’ ] )
displayFeatureResults()
This allows for promotion of properties that have been marked as Featured in the system. This list is displayed as a table so that you can define how many columns and/or rows you wish to show.
contactForm()
This function is a simple enquiry form, this automatically links up to the agent's contact database in the system and links enquiries to existing contacts or if the email address is unique it will create a new contact record and associate their search enquiry as a task. Please see the following knowledge base article for more information Leads from your website need assigning to a salesperson
displayPropertyDetail()
This functionality is to automatically generate the meta tags on the property detail page to improve SEO ranking.
 
 
Customisation
 
Configuration
webkitConfig.php
 
The webkitConfig.php file is split up into 9 sections
Authorise Constants (Location of the ContactId and Security Token)
Search Criteria (The Search Criteria i.e. Language, Search Areas and Search Type)
Website File Location (The modules you want the webkit to work with)
Available Search Options (The search options you want to offer the user)
Featured Properties Search Criteria (The Search criteria for displayFeatureResults() )
Property Detail Options (Control what functions you want on the property detail page)
URL ReWrite format (Customise the URL path generated by the webkit)
API URLS (The location of the API, this will only need to be updated when we release a new version of the API)
Include File locations (If the directory structure of the website differs from that provided in the sample)
 
You can find a complete list of the variable definitions at the end of this document.
 
incWebkitTemplates.php
 
This file generates the content of the display functions. This file is split into two sections:  the first to generate the content of the dropdown lists, the second is to convert the html templates to the actual output of the webkit.
To change the output of the numeric drop-down lists you can edit the values of the function generateRange(). The energy rating, bathrooms and bedrooms drop-down functionality is slightly different and they have their own functions to modify if you want to change the output of the lists.
getEnergyRatingLanguage;
getBedBathLanguage;
 
Templates
In the webkit folder under the directory Templates are a list of html files containing the structure of the layouts for each function. At the top of the file you will find the variables that you can use.  The variable names correlate to the variables in PHP, for example:
$resultBeds = {resultBeds}
$resultLocation = {resultLocation}
The list of HTML layouts are below;
searchForm.html
resultsPagination.html (HTML for the results headers and footers)
resultsList.html (HTML for each result row)
matchedFeatures.html (HTML for displaying features when searching by features)
propertyDetail.html
featuredProperty.html (HTML for each Featured Property box when using displayFeatureResults())
featuredPropertyItem.html
featureListItem.html
featureDetailItem.html
contactForm.html
The file incWebkitTemplates.php processes the HTML templates to convert them into the correct output for the function.
 
CSS
 
Each of the HTML templates have a series of CSS classes that you can modify to suit the website's requirements.  All of the CSS definitions for these templates are found in main.css
Search Form
Class Name
Object Description
.wbSearchDropdown
Search select options
.wbSearchTextBox
Search input text options
.wbSearchMultiSelect
Search chosen multi-select options
.wbSearchButton
Search submit button
.wbSearchContainer
Search Container
 
Pagination
Class Name
Object Description
.wbPagContainer
Results Pagination header Container
.wbPagButton.active
Results Pagination buttons
.wbPagSortDropDown
Results Sort order dropdown
.wbPagSortText
Results Sort order label
.wbPagCountDropDown
Results display count dropdown
.wbPagCountText
Results display count label
.wbPagIndicatorText
Results Pagination description ie: ‘Page 2 of 7’
 
Results
Class Name
Object Description
.wbResultContainer
Result Container
.wbResultImage
Result Image
.wbResultHeader
Result Header
.wbResultDescription
Result Description
.wbResultDetailLabel
Result Detail Label
.wbResultDetailValue
Result Detail Text
 
ResultsFeatureMatches
Class Name
Object Description
.wbResFeatureLabel
Feature Label
.wbResFeatureValue
Feature Matched
.wbResFeatureValueStrikethrough
Feature not matched
 
Property detail
Class Name
Object Description
.wbDetailContainer
Property detail container
.wbDetailHeader
Property detail title
.wbDetailTitle
Property detail subtitle
.wbDetailDescription
Property detail description
.wbDetailPropHeader
Property details ‘Details’ Title
.wbDetailPropDetails
Property details ‘Details’ Item
.wbDetailFeatureHeader
Property details ‘Feature Categories’ titles
.wbDetailFeatureDetail
Property details ‘Feature’ items
 
Contact Form
Class Name
Object Description
.wbContactContainer
Contact form container
.wbContactHeader
Contact form title
.wbContactInput
Contact form input type text
.wbContactTextArea
Contact form text area
.wbContactSubmit
Contact form submit button
.wbContactResponse
Contact form response text
 
Featured properties
Class Name
Object Description
.wbFeaturedContainer
Results Pagination header Container
.wbFeaturedImage
Results Pagination buttons
.wbFeaturedTitle
Results Sort order dropdown
.wbFeaturedDetails
Results Sort order label
 
 
 
Javascript
 
The webkit has a number of javascript functions that are required.
                Search Function/ Search Results
SearchForm.js (This is used to dynamically update the search form when the options are changed)
Chosen.jquery.js
[Optional] JQueryUI (Only required if using $showRentalDateRange = true;)
 
Property Detail
jquery.resizecrop-1.0.3.js (to format the images, to always show a square image)
bookingCalendar.js (to submit a date range query on a rental property)
imageViewer.js (a lightweight picture carrousel tool)
contactForm.js (to validate and submit a contact query)
[Optional] JQueryUI (Only required if using $showBookingCalendar = true;)
 
 
 
Handling multiple search functions
With the current functionality you can only display a single search function on a page. However you could have a rental search function on one page and a resale search function on another page by simply creating two versions of the configuration file. They can point to the same results page.
 
 
Variable definitions
Below is a list of the options available for the variables
Section
Variable
Options
Search Criteria
$language
(Single Option)
1 => English,
2 => Spanish,
3 => German,
4 => French,
5 => Dutch,
6 => Danish,
7 => Russian,
8 => Swedish,
9 => Polish,
10 => Norwegian
Search Criteria
$country
Spain
Search Criteria
$defaultArea
 (Single Option)
Alicante (Costa Blanca),
Almería (Costa Almería),
Barcelona (Costa Dorada),
Costa de la Luz,
Costa del Sol,
Costa del Sol East,
Girona (Costa Brava),
Gran Canaria,
Granada (Costa Tropical),
Ibiza,
Lanzarote,
Las Palmas,
Mallorca,
Menorca,
Murcia (Costa Calida),
Tarragona (Costa Dorada),
Tenerife
Search Criteria
$Areas
(Comma Separated List)
Alicante (Costa Blanca),
Almería (Costa Almería),
Barcelona (Costa Dorada),
Costa de la Luz,
Costa del Sol,
Costa del Sol East,
Girona (Costa Brava),
Gran Canaria,
Granada (Costa Tropical),
Ibiza,
Lanzarote,
Las Palmas,
Mallorca,
Menorca,
Murcia (Costa Calida),
Tarragona (Costa Dorada),
Tenerife
Search Criteria
$searchType
(Single Option)
Resale,
Rental,
RentalST,
RentalLT,
All
Search Criteria
$pOwn
(Single Option)
Show only your own properties
0 => No,
1 => Yes
Search Criteria
$pPreferred
(Single Option)
Show only your preferred agents’ properties - this can be defined in the system?
0 => No,
1 => Yes
Search Criteria
$removeLocations
(Array)
If you do not want to show specific locations you can choose to remove them from this list and search results by adding the locations in here.
Search Criteria
$removeTypes
(Array)
If you do not want to show specific property types you can choose to remove them from the list and search results by adding the property types in here.
Search Pages URL
$resultsPage,
$detailPage,
$bookingPage
These parameters accept a local location of the modules you wish to link the webkit to.
Search Form Options
$showArea
true => Show option,
false => Hide option
Search Form Options
$showSubtypes
true => Show option,
false => Hide option
Search Form Options
$showCurrency
true => Show option,
false => Hide option
Search Form Options
$showBeds
true => Show option,
false => Hide option
Search Form Options
$showBaths
true => Show option,
false => Hide option
Search Form Options
$showRating?
true => Show option,
false => Hide option
Search Form Options
$showChosen
true => Use predictive text multiple select dropdown boxes,
false => Use normal multiple select dropdown boxes
Search Form Options
$showRentalDateRange
true => Show option,
false => Hide option
Featured Properties Search Criteria
$fLocation
(String) (Comma Separated List)
Show only properties in a specific location. Or by a csv list of locations.
Featured Properties Search Criteria
$fDefaultArea
(String)
 
Specific area or empty.
Featured Properties Search Criteria
$fPropertyType
(String)
                       
Filter by property type ie.
 1-1 = Apartment 
 2-1 = House 
 3-1 = Plot
 4-1 = Commercial
Subtype filters will be available soon.
Featured Properties Search Criteria
$fBed
(String)
Filter by beds ie.
‘2’ => Properties with 2 beds,
‘2+’ => 2 or more
Featured Properties Search Criteria
$fBath
(String)
Filter by baths ie.
‘2’ => Properties with 2 baths,
‘2+’ => 2 or more
Featured Properties Search Criteria
$fSortType
(Int)
0 => by price ascending,
1 => by price descending,
2 => by location alphabetic
Featured Properties Search Criteria
$fPNum
(Int)
Amount of featured properties returned. Please make sure this value is >= fCol * fRow
 
Featured Properties Search Criteria
$fEnergyRating
(Int)
Filter featured properties by energy rating value;
1 => Not Rated,
2 => Rated,
3 => No Preference,
4 => A,
5 => B  or better,
6 => B,
7 => C or better,
8 => C,
9 => D or Better,
10 => D,
11 => E or Better,
12 => E,
 
Featured Properties Search Criteria
$fRow 
(Int)
How many rows to display featured properties
Featured Properties Search Criteria
$fCol
(Int)
How many columns to display featured properties
Featured Properties Search Criteria
$fWidth
(Int)
Pixel width of Features container
Featured Properties Search Criteria
$fShowFullWidth
(Boolean)
true => Ignore fWidth display 100%,
false => Ignore option
Property Detail Options
$showBookingCalendar
true => Show option,
false => Hide option
Property Detail Options
$showFeature
Available options;
Setting, Condition, Pool, Climate Control, Views, Features, Furniture, Kitchen, Garden, Security, Parking, Utilities, Category
 
‘’ => No Feature categories shown,
‘csv’ = define the categories that are shown
URL ReWrite
$rewritePatternUrl
(string) hyphen separated list
Must include RefId
Available Options;
beds, baths, type, location, refid, area, search_type, subtype
URL ReWrite
$autoRewritePattern
(string) hyphen separated list
Used only for autoSearchLink();
Available Options;
location, area, type, subtype, priceMin, priceMax